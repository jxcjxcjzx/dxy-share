{"version":3,"sources":["dxy-share.js"],"names":["jQuery","require","$","dxy_share","synIMG","url","fun","wrapDom","img","Image","src","style","display","onload","onerror","document","getElementsByTagName","appendChild","isMobile","test","window","navigator","userAgent","sName_obj","sina","tt","douban","renren","qzone","idxy","weixin","sApi","charset","share_html","share_lst_html","this","show","op","getDate","pad","number","d","Date","getFullYear","getMonth","getHours","getMinutes","getSeconds","getMilliseconds","getContentId","match","attr","log","info","defaults","event_datetime","event_type","event_comment","title","event_url","location","href","content_id","data","extend","TA","shareFeed","body","ajax","type","async","jsonpCallback","contentType","dataType","success","status","alert","message","other","loginIdxy","open","toggle","tid","share_btn","id","share_box","length","show_share_box","clearTimeout","css","hide_share_box","timeout","setTimeout","click","event","addEventListener","target","parentNode","classList","contains","mouseenter","mouseout","mouseover","toggle2","arr","shareUrl","_fnAddTo","fnAddTo","container","i","html","parseInt","top","follow_share","createElement","className","innerHTML","eventIds","on","$this","name","event_id","j_dxyshare_a_arr","getElementById","_loop","addBtnEvent","e","_url","encodeURI","weixin_node","weixin_api","temp","close","triangle","left","zIndex","w_a","onclick","_txt","share_txt","addTo","api","encodeURIComponent","screen","width","height","share","module","exports"],"mappings":"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","file":"dxy-share.min.js","sourcesContent":["var jQuery;\nif (typeof require !== 'undefined') {\n    jQuery = require('jquery');\n}\nelse {\n    jQuery = $;  // for IE8\n}\n\n(function ($) {\n    function dxy_share() {\n\n        var isMobile = /mobile|dxyapp/i.test(window.navigator.userAgent);\n\n        function synIMG(url, fun, wrapDom) {\n            var img = new Image();\n            img.src = url;\n            img.style.display = 'none';\n            img.onload = function () {\n                //console.log('onload:',this);\n            }\n            img.onerror = function () {\n                //console.log('onerror:',this);\n                fun(img);\n            }\n\n            if (!wrapDom) {\n                wrapDom = document.getElementsByTagName('body')[0];\n            }\n            wrapDom.appendChild(img);\n        }\n\n        var sName_obj = {\n            sina: '新浪微博',\n            tt: '腾讯微博',\n            douban: '豆瓣',\n            renren: '人人网',\n            qzone: 'QQ空间',\n            idxy: '丁香客',\n            weixin: '微信'\n        };\n        var sApi = {\n            sina: 'http://v.t.sina.com.cn/share/share.php?appkey=1611508056&content=' + (document.charset || \"gbk\") + '&',\n            tt: 'http://v.t.qq.com/share/share.php?',\n            douban: 'http://www.douban.com/share/service/?',\n            renren: 'http://widget.renren.com/dialog/share?',\n            qzone: 'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?',\n            idxy: '',\n            weixin: 'http://api.dxy.cn/qr-code/?'\n        };\n\n        var share_html = '',\n            share_lst_html = '';\n\n\n        this.show = function (op) {\n            var id = op['id'],\n                arr = op['lst'],\n                style = op['style'],\n                shareUrl = op['url'],\n                _fnAddTo = op.fnAddTo || {},\n                container = $('#' + id);\n            //$(id).style.visibility=\"hidden\";\n\n            //console.log(id,arr);\n\n            switch (style) {\n                case 1:\n                    if (arr.length > 0) {\n                        for (var i = 0; i < arr.length; i++) {\n                            share_lst_html += \"<div class='plg_share_el_nav1_it'><i class='plg_share_el_nav1_ico plg_ico_\" + arr[i] + \"'>&nbsp;</i><a href='javascript:void(0);' title='\" + sName_obj[arr[i]] + \"' name='\" + arr[i] + \"'>\" + sName_obj[arr[i]] + \"</a></div>\";\n                        }\n                    }\n\n                    share_html = '<div class=\"plg_share_wrap plg_share_style' + style + '\"><a href=\"javascript:void(0)\" class=\"share_btn\" id=\"j_dxy_sharebtn_' + id + '\">分享到</a><dl class=\"plg_share_el_box2 xbox1\" id=\"j_dxy_sharebox_' + id + '\"><dt class=\"plg_share_el_box2_hd\"><b class=\"pl10 mr10\">分享到</b></dt><dd class=\"plg_share_el_box2_ct\"><div class=\"plg_share_el_nav1\" id=\"j_dxyshare_lst_' + id + '\">' + share_lst_html + '</div></dd></dl></div>';\n                    //console.log(share_html);\n\n                    container.html(share_html);\n                    toggle();\n                    break;\n\n                case 2:\n                    if (arr.length > 0) {\n                        for (var i = 0; i < arr.length; i++) {\n                            share_lst_html += \"<div class='plg_share_el_nav1_it'><i class='plg_share_el_nav1_ico plg_ico_\" + arr[i] + \"'>&nbsp;</i><a href='javascript:void(0);' title='\" + sName_obj[arr[i]] + \"' name='\" + arr[i] + \"'>\" + sName_obj[arr[i]] + \"</a></div>\";\n                        }\n                    }\n\n                    share_html = '<div class=\"plg_share_wrap plg_share_style' + style + '\"><a href=\"javascript:void(0)\" class=\"share_btn\" id=\"j_dxy_sharebtn_' + id + '\">分享到</a><dl class=\"plg_share_el_box2 xbox1\" id=\"j_dxy_sharebox_' + id + '\"><dt class=\"plg_share_el_box2_hd\"><b class=\"pl10 mr10\">分享到</b></dt><dd class=\"plg_share_el_box2_ct\"><div class=\"plg_share_el_nav1\" id=\"j_dxyshare_lst_' + id + '\">' + share_lst_html + '</div></dd></dl></div>';\n                    //console.log(share_html);\n\n                    container.html(share_html);\n                    toggle();\n                    break;\n\n                case 3:\n                    if (arr.length > 0) {\n                        for (var i = 0; i < arr.length; i++) {\n                            share_lst_html += \"<div class='plg_share_el_nav1_ico_wrap'><a href='javascript:void(0);' name='\" + arr[i] + \"' class='plg_share_el_nav1_ico plg_ico_\" + arr[i] + \"' title='\" + sName_obj[arr[i]] + \"'>&nbsp;</a></div>\";\n                        }\n                    }\n\n                    share_html = '<div class=\"plg_share_wrap plg_share_style' + style + '\"><span class=\"share_btn\">分享到：</span><div class=\"plg_share_el_box2_ct\" id=\"j_dxyshare_lst_' + id + '\">' + share_lst_html + '</div></div>';\n                    //console.log(share_html);\n\n                    container.html(share_html);\n\n                    break;\n\n                case 4:\n                    if (arr.length > 0) {\n                        for (var i = 0; i < arr.length; i++) {\n                            share_lst_html += \"<div class='plg_share_el_nav1_it'><a href='javascript:void(0);' name='\" + arr[i] + \"' class='plg_share_el_nav1_ico plg_ico_\" + arr[i] + \"' title='\" + sName_obj[arr[i]] + \"'>\" + sName_obj[arr[i]] + \"</a></div>\";\n                        }\n                    }\n\n                    share_html = '<div class=\"plg_share_wrap plg_share_style' + style + '\"><dl class=\"plg_share_el_box2 xbox1\" id=\"j_dxy_sharebox_' + id + '\"><dd class=\"plg_share_el_box2_ct\"><div class=\"plg_share_el_nav1\" id=\"j_dxyshare_lst_' + id + '\"><div class=\"plg_share_el_nav1_it dxy_sharebox_title\">分享</div>' + share_lst_html + '</div></dd></dl></div>';\n                    //console.log(share_html);\n                    container.html(share_html);\n\n                    break;\n\n\n                case 5:\n                    if (arr.length > 0) {\n                        for (var i = 0; i < arr.length; i++) {\n                            share_lst_html += \"<div class='plg_share_el_nav1_it'><a href='javascript:void(0);' name='\" + arr[i] + \"' title='\" + sName_obj[arr[i]] + \"' class='plg_share_el_nav1_ico plg_ico_\" + arr[i] + \"'>\" + sName_obj[arr[i]] + \"</a></div>\";\n                        }\n                    }\n\n                    share_html = '<dl id=\"j_dxy_sharebox_' + id + '\" class=\"plg_share_el_box2 xbox1\" style=\"margin-top:' + parseInt(op.top) + 'px;\"><dd class=\"plg_share_el_box2_ct\"><div id=\"j_dxyshare_lst_' + id + '\" class=\"plg_share_el_nav1\">' + share_lst_html + '</div></dd></dl>';\n\n                    var follow_share = document.createElement('div');\n                    follow_share.className = 'plg_share_wrap plg_share_style' + style;\n                    follow_share.innerHTML = share_html;\n                    document.body.appendChild(follow_share);\n\n                    break;\n\n                case 6:\n                    if (arr.length > 0) {\n                        for (var i = 0; i < arr.length; i++) {\n                            share_lst_html += \"<div class='plg_share_el_nav1_it'><i class='plg_share_el_nav1_ico plg_ico_\" + arr[i] + \"'>&nbsp;</i><a href='javascript:void(0);' title='\" + sName_obj[arr[i]] + \"' name='\" + arr[i] + \"'>\" + sName_obj[arr[i]] + \"</a></div>\";\n                        }\n                    }\n\n                    share_html = '<div class=\"plg_share_wrap plg_share_style' + style + '\"><dl class=\"plg_share_el_box2 xbox1\"><dt class=\"plg_share_el_box2_hd\"><b class=\"pl10 mr10\">分享到</b></dt><dd class=\"plg_share_el_box2_ct\"><div class=\"plg_share_el_nav1\" id=\"j_dxyshare_lst_' + id + '\">' + share_lst_html + '</div></dd></dl></div>';\n                    //console.log(share_html);\n\n                    container.html(share_html);\n                    toggle();\n\n                    break;\n\n                case 'm1':\n                    if (arr.length > 0) {\n                        for (var i = 0; i < arr.length; i++) {\n                            share_lst_html += \"<div class='plg_share_el_nav1_it'><a href='javascript:void(0);' name='\" + arr[i] + \"' class='plg_share_el_nav1_ico plg_ico_\" + arr[i] + \"' title='\" + sName_obj[arr[i]] + \"'>\" + sName_obj[arr[i]] + \"</a></div>\";\n                        }\n                    }\n\n                    share_html = '<div class=\"plg_share_wrap plg_share_style_' + style + '\"><dl class=\"plg_share_el_box2 xbox1\"><dt><div class=\"plg_share_el_nav1_it dxy_sharebox_title\" id=\"j_dxy_sharebtn_' + id + '\">分享</div></dt><dd class=\"plg_share_el_box2_ct\" id=\"j_dxy_sharebox_' + id + '\"><div class=\"plg_share_el_nav1\" id=\"j_dxyshare_lst_' + id + '\">' + share_lst_html + '</div></dd></dl></div>';\n                    container.html(share_html);\n                    toggle2();\n                    break;\n\n            }\n\n            // 分享打点\n            function getDate() {\n                function pad(number) {\n                    return number < 10 ? ('0' + number) : number;\n                }\n\n                var d = new Date();\n\n                return d.getFullYear() +\n                    '-' + pad(d.getMonth() + 1) +\n                    '-' + pad(d.getDate()) +\n                    ' ' + pad(d.getHours()) +\n                    ':' + pad(d.getMinutes()) +\n                    ':' + pad(d.getSeconds()) +\n                    ' ' + pad(d.getMilliseconds());\n            }\n\n            function getContentId () {\n                var match = $('body').attr('class').match(/page-node-(\\d+)/);\n                return match ? match[1] : -1;\n            }\n\n            function log(info) {\n                var defaults = {\n                    event_datetime: getDate(),\n                    event_type: 'click',\n                    event_comment: document.title,\n                    event_url: window.location.href,\n                    content_id: getContentId()\n                };\n                var data = $.extend({}, defaults, info);\n\n                TA.log(data);\n            }\n\n            if (op['da']) {\n                var eventIds = {\n                    // Todo\n                    sina: 'cssw', // click_sns_sina_weibo\n                    weixin: 'csw', // click_sns_wechat\n                    tt: 'cstw', // click_sns_tencent_weibo\n                    qzone: 'csqs', // click_sns_qq_space\n                    idxy: 'csdb' // click_sns_dxy_blog\n                };\n                $('#' + id + ' a[name]').on('click', function () {\n                    var $this = $(this);\n                    var name = $this.attr('name');\n                    var info = {\n                        event_id: eventIds[name]\n                    };\n\n                    log(info);\n                });\n            }\n\n\n            //tagName='a' event\n            var j_dxyshare_a_arr = document.getElementById('j_dxyshare_lst_' + id).getElementsByTagName('a');\n\n            for (var i = 0; i < j_dxyshare_a_arr.length; i++) {\n\n                function addBtnEvent(e) {\n                    var _url = shareUrl || window.location.href;\n                    _url = encodeURI(_url);\n\n                    if (this.name == 'weixin') {\n                        var weixin_node = this.parentNode,\n                            weixin_api = sApi[this.name] + 'url=' + _url + '&size=5&margin=1&format=png';\n\n                        var weixin = $('.weixin', weixin_node)[0];\n\n                        if (weixin) {\n                            weixin.style.display = 'block';\n                        } else {\n                            // PC 端的微信分享\n                            var temp, close, triangle;\n\n                            temp = '<div class=\"w_center\">' +\n                                '<div id=\"w_qr\" class=\"w_qr\" width=\"90\" height=\"90\"></div>' +\n                                '<p class=\"w_cont\">使用微信“扫一扫”分享到朋友圈。</p>' +\n                                '</div>' +\n                                '<div id=\"triangle\" class=\"w_bottom\"></div>' +\n                                '<div id=\"w_close\" class=\"w_close\"></div>';\n                            weixin = document.createElement('div');\n                            weixin.id = 'w_xin';\n                            weixin.className = 'weixin';\n\n                            weixin.innerHTML = temp;\n\n                            weixin_node.appendChild(weixin);\n                            triangle = $('.w_bottom', weixin_node)[0];\n\n                            //微信box定位调整\n                            if (style == 1) {\n                                weixin.style.top = '-83px';\n                                weixin.style.left = '175px';\n                                triangle.className = 'w_left';\n                            } else if (style == 2) {\n                                weixin.style.top = '-83px';\n                                weixin.style.left = '120px';\n                                triangle.className = 'w_left';\n                            } else if (style == 3) {\n                                weixin.style.left = '-12px';\n                            } else if (style == 5) {\n                                weixin.style.top = '-83px';\n                                weixin.style.left = '-283px';\n                                triangle.className = 'w_right';\n                                weixin.style.zIndex = 3;\n                            }\n\n                            //重新绑定事件\n                            var w_a = weixin.parentNode.getElementsByTagName('a');\n                            for (var i = 0; i < w_a.length; i++) {\n                                w_a[i].onclick = addBtnEvent;\n                            }\n\n                            close = $('.w_close', weixin_node)[0];\n                            close.onclick = function() {\n                                weixin.style.display = 'none';\n                            };\n\n                            $('.w_qr', weixin_node)[0].innerHTML = '<img src=\"' + weixin_api + '\" width=\"90\" height=\"90\">';\n                        }\n\n                    } else if (this.name === 'idxy') {\n\n                        var _txt = ((op.share_txt) ? op.share_txt : document.title) + ' ' + _url;\n\n\n                        shareFeed(_txt);\n\n                    } else {\n                        var share_txt = (op.share_txt) ? op.share_txt : document.title + ((op.addTo) ? op.addTo : '');\n                        var api = '';\n\n                        if (this.name === 'douban') {\n                            api = sApi[this.name] + 'name=' + encodeURIComponent(share_txt) + '&href=' + encodeURIComponent(_url) + '&text=%20';\n                            //console.log(api);\n                        } else if (this.name === 'renren') {\n                            api = sApi[this.name] + 'title=' + encodeURIComponent(share_txt) + '&resourceUrl=' + encodeURIComponent(_url) + '&srcUrl=' + encodeURIComponent(_url) + '&description=%20';\n                        } else if (this.name === 'qzone') {\n                            api = sApi[this.name] + 'url=' + encodeURIComponent(_url) + '&title=' + encodeURIComponent(share_txt) + '&summary=%20';\n                        } else {\n                            api = sApi[this.name] + 'title=' + encodeURIComponent(share_txt) + '&url=' + encodeURIComponent(_url) + '&summary=%20';\n                        }\n                        window.open(api, '_blank', 'toolbar=0,status=0,resizable=1,width=750,height=430,' + 'left=' + (screen.width - 750) / 2 + ',top=' + (screen.height - 430) / 2);\n                    }\n\n                    if (typeof _fnAddTo[this.name] == \"function\") {\n                        _fnAddTo[this.name]();\n                    }\n                    //console.log();\n\n                }\n\n                j_dxyshare_a_arr[i].onclick = addBtnEvent;\n            }\n\n            // shareto idxy\n            function shareFeed(body) {\n\n                //1.验证是否登录\n                synIMG('https://auth.dxy.cn/login?service=http://i.dxy.cn/', function () {\n\n                    var url = 'http://i.dxy.cn' + '/snsapi/share/feed?dataType=jsonp&callback=cb';\n                    $.ajax({\n\n                        type: 'GET',\n                        url: url,\n                        async: false,\n                        jsonpCallback: 'cb',\n                        contentType: \"application/json\",\n                        dataType: 'jsonp',\n                        data: {\n                            'body': body\n                        },\n                        success: function (data) {\n                            if (data.status == 'ok') {\n                                alert('分享成功');\n                            } else {\n                                if (data.message == '100') {\n                                    alert('请先登录');\n                                    if (op.other && op.other.loginIdxy) {\n                                        window.open('https://auth.dxy.cn/login?service=http://i.dxy.cn/');\n                                    }\n                                } else {\n                                    alert('系统异常');\n                                }\n                            }\n                        }\n                    });\n\n                })\n\n            }\n\n            //add event\n            function toggle() {\n                var share_btn = $('#j_dxy_sharebtn_' + id),\n                    share_box = $('#j_dxy_sharebox_' + id),\n                    tid;\n                if (share_btn.length && share_box.length) {\n\n                    var show_share_box = function () {\n                        if (tid) {\n                            clearTimeout(tid);\n                        }\n                        share_box.css('display', 'block');\n                    };\n\n                    var hide_share_box = function (timeout) {\n                        if (timeout) {\n                            tid = setTimeout(function () {\n                                share_box.css('display', 'none');\n                            }, 1000);\n                        }\n                        else {\n                            share_box.css('display', 'none');\n                        }\n                    };\n\n                    if (isMobile) {\n                        share_btn.click(function (event) {\n                            show_share_box();\n\n                            document.body.addEventListener('click', function (event) {\n                                if (!event.target.parentNode.classList.contains('plg_share_el_nav1_it')) {\n                                    hide_share_box(false);\n                                }\n                            }, true);\n                        });\n                    }\n                    else {\n                        share_btn.mouseenter(function () {\n                            show_share_box();\n                        });\n\n                        share_btn.mouseout(function () {\n                            hide_share_box(true);\n                        });\n\n                        share_box.mouseover(function () {\n                            show_share_box();\n                        });\n\n                        share_box.mouseout(function () {\n                            hide_share_box(true);\n                        });\n                    }\n                }\n            }\n\n            function toggle2() {\n                var share_btn = $('#j_dxy_sharebtn_' + id),\n                    share_box = $('#j_dxy_sharebox_' + id);\n                if (share_btn.length && share_box.length) {\n                    share_btn.click(function () {\n                        share_box.css('display', share_box.css('display') === 'block' ? 'none' : 'block');\n                    });\n                }\n            }\n\n\n            //show\n            /*setTimeout(function(){\n             $(id).style.visibility=\"visible\";\n             },1000)*/\n\n        }\n\n        this.share = function (id) {\n            //console.log(id);\n        }\n    }\n\n    if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n        module.exports = dxy_share;\n    }\n    else {\n        window.dxy_share = dxy_share;\n    }\n})(jQuery);"],"sourceRoot":"/source/"}