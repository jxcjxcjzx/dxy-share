"use strict";var jQuery;jQuery="undefined"!=typeof require?require("jquery"):$,function(e){function a(){function a(e,a,s){var t=new Image;t.src=e,t.style.display="none",t.onload=function(){},t.onerror=function(){a(t)},s||(s=document.getElementsByTagName("body")[0]),s.appendChild(t)}var s=/mobile|dxyapp/i.test(window.navigator.userAgent),t={sina:"新浪微博",tt:"腾讯微博",douban:"豆瓣",renren:"人人网",qzone:"QQ空间",idxy:"丁香客",weixin:"微信"},l={sina:"http://v.t.sina.com.cn/share/share.php?appkey=1611508056&content="+(document.charset||"gbk")+"&",tt:"http://v.t.qq.com/share/share.php?",douban:"http://www.douban.com/share/service/?",renren:"http://widget.renren.com/dialog/share?",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?",idxy:"",weixin:"http://api.dxy.cn/qr-code/?"},n="",i="";this.show=function(_){function d(){function e(e){return 10>e?"0"+e:e}var a=new Date;return a.getFullYear()+"-"+e(a.getMonth()+1)+"-"+e(a.getDate())+" "+e(a.getHours())+":"+e(a.getMinutes())+":"+e(a.getSeconds())+" "+e(a.getMilliseconds())}function r(){var a=e("body").attr("class").match(/page-node-(\d+)/);return a?a[1]:-1}function o(a){var s={event_datetime:d(),event_type:"click",event_comment:document.title,event_url:window.location.href,content_id:r()},t=e.extend({},s,a);TA.log(t)}function c(s){a("https://auth.dxy.cn/login?service=http://i.dxy.cn/",function(){var a="http://i.dxy.cn/snsapi/share/feed?dataType=jsonp&callback=cb";e.ajax({type:"GET",url:a,async:!1,jsonpCallback:"cb",contentType:"application/json",dataType:"jsonp",data:{body:s},success:function(e){"ok"==e.status?alert("分享成功"):"100"==e.message?(alert("请先登录"),_.other&&_.other.loginIdxy&&window.open("https://auth.dxy.cn/login?service=http://i.dxy.cn/")):alert("系统异常")}})})}function h(){var a,t=e("#j_dxy_sharebtn_"+v),l=e("#j_dxy_sharebox_"+v);if(t.length&&l.length){var n=function(){a&&clearTimeout(a),l.css("display","block")},i=function(e){e?a=setTimeout(function(){l.css("display","none")},1e3):l.css("display","none")};s?t.click(function(e){n(),document.body.addEventListener("click",function(e){e.target.parentNode.classList.contains("plg_share_el_nav1_it")||i(!1)},!0)}):(t.mouseenter(function(){n()}),t.mouseout(function(){i(!0)}),l.mouseover(function(){n()}),l.mouseout(function(){i(!0)}))}}function p(){var a=e("#j_dxy_sharebtn_"+v),s=e("#j_dxy_sharebox_"+v);a.length&&s.length&&a.click(function(){s.css("display","block"===s.css("display")?"none":"block")})}var v=_.id,g=_.lst,m=_.style,x=_.url,y=_.fnAddTo||{},u=e("#"+v);switch(m){case 1:if(g.length>0)for(var b=0;b<g.length;b++)i+="<div class='plg_share_el_nav1_it'><i class='plg_share_el_nav1_ico plg_ico_"+g[b]+"'>&nbsp;</i><a href='javascript:void(0);' title='"+t[g[b]]+"' name='"+g[b]+"'>"+t[g[b]]+"</a></div>";n='<div class="plg_share_wrap plg_share_style'+m+'"><a href="javascript:void(0)" class="share_btn" id="j_dxy_sharebtn_'+v+'">分享到</a><dl class="plg_share_el_box2 xbox1" id="j_dxy_sharebox_'+v+'"><dt class="plg_share_el_box2_hd"><b class="pl10 mr10">分享到</b></dt><dd class="plg_share_el_box2_ct"><div class="plg_share_el_nav1" id="j_dxyshare_lst_'+v+'">'+i+"</div></dd></dl></div>",u.html(n),h();break;case 2:if(g.length>0)for(var b=0;b<g.length;b++)i+="<div class='plg_share_el_nav1_it'><i class='plg_share_el_nav1_ico plg_ico_"+g[b]+"'>&nbsp;</i><a href='javascript:void(0);' title='"+t[g[b]]+"' name='"+g[b]+"'>"+t[g[b]]+"</a></div>";n='<div class="plg_share_wrap plg_share_style'+m+'"><a href="javascript:void(0)" class="share_btn" id="j_dxy_sharebtn_'+v+'">分享到</a><dl class="plg_share_el_box2 xbox1" id="j_dxy_sharebox_'+v+'"><dt class="plg_share_el_box2_hd"><b class="pl10 mr10">分享到</b></dt><dd class="plg_share_el_box2_ct"><div class="plg_share_el_nav1" id="j_dxyshare_lst_'+v+'">'+i+"</div></dd></dl></div>",u.html(n),h();break;case 3:if(g.length>0)for(var b=0;b<g.length;b++)i+="<div class='plg_share_el_nav1_ico_wrap'><a href='javascript:void(0);' name='"+g[b]+"' class='plg_share_el_nav1_ico plg_ico_"+g[b]+"' title='"+t[g[b]]+"'>&nbsp;</a></div>";n='<div class="plg_share_wrap plg_share_style'+m+'"><span class="share_btn">分享到：</span><div class="plg_share_el_box2_ct" id="j_dxyshare_lst_'+v+'">'+i+"</div></div>",u.html(n);break;case 4:if(g.length>0)for(var b=0;b<g.length;b++)i+="<div class='plg_share_el_nav1_it'><a href='javascript:void(0);' name='"+g[b]+"' class='plg_share_el_nav1_ico plg_ico_"+g[b]+"' title='"+t[g[b]]+"'>"+t[g[b]]+"</a></div>";n='<div class="plg_share_wrap plg_share_style'+m+'"><dl class="plg_share_el_box2 xbox1" id="j_dxy_sharebox_'+v+'"><dd class="plg_share_el_box2_ct"><div class="plg_share_el_nav1" id="j_dxyshare_lst_'+v+'"><div class="plg_share_el_nav1_it dxy_sharebox_title">分享</div>'+i+"</div></dd></dl></div>",u.html(n);break;case 5:if(g.length>0)for(var b=0;b<g.length;b++)i+="<div class='plg_share_el_nav1_it'><a href='javascript:void(0);' name='"+g[b]+"' title='"+t[g[b]]+"' class='plg_share_el_nav1_ico plg_ico_"+g[b]+"'>"+t[g[b]]+"</a></div>";n='<dl id="j_dxy_sharebox_'+v+'" class="plg_share_el_box2 xbox1" style="margin-top:'+parseInt(_.top)+'px;"><dd class="plg_share_el_box2_ct"><div id="j_dxyshare_lst_'+v+'" class="plg_share_el_nav1">'+i+"</div></dd></dl>";var f=document.createElement("div");f.className="plg_share_wrap plg_share_style"+m,f.innerHTML=n,document.body.appendChild(f);break;case 6:if(g.length>0)for(var b=0;b<g.length;b++)i+="<div class='plg_share_el_nav1_it'><i class='plg_share_el_nav1_ico plg_ico_"+g[b]+"'>&nbsp;</i><a href='javascript:void(0);' title='"+t[g[b]]+"' name='"+g[b]+"'>"+t[g[b]]+"</a></div>";n='<div class="plg_share_wrap plg_share_style'+m+'"><dl class="plg_share_el_box2 xbox1"><dt class="plg_share_el_box2_hd"><b class="pl10 mr10">分享到</b></dt><dd class="plg_share_el_box2_ct"><div class="plg_share_el_nav1" id="j_dxyshare_lst_'+v+'">'+i+"</div></dd></dl></div>",u.html(n),h();break;case"m1":if(g.length>0)for(var b=0;b<g.length;b++)i+="<div class='plg_share_el_nav1_it'><a href='javascript:void(0);' name='"+g[b]+"' class='plg_share_el_nav1_ico plg_ico_"+g[b]+"' title='"+t[g[b]]+"'>"+t[g[b]]+"</a></div>";n='<div class="plg_share_wrap plg_share_style_'+m+'"><dl class="plg_share_el_box2 xbox1"><dt><div class="plg_share_el_nav1_it dxy_sharebox_title" id="j_dxy_sharebtn_'+v+'">分享</div></dt><dd class="plg_share_el_box2_ct" id="j_dxy_sharebox_'+v+'"><div class="plg_share_el_nav1" id="j_dxyshare_lst_'+v+'">'+i+"</div></dd></dl></div>",u.html(n),p()}if(_.da){var w={sina:"cssw",weixin:"csw",tt:"cstw",qzone:"csqs",idxy:"csdb"};e("#"+v+" a[name]").on("click",function(){var a=e(this),s=a.attr("name"),t={event_id:w[s]};o(t)})}for(var j=document.getElementById("j_dxyshare_lst_"+v).getElementsByTagName("a"),k=function(){function a(s){var t=x||window.location.href;if(t=encodeURI(t),"weixin"==this.name){var n=this.parentNode,i=l[this.name]+"url="+t+"&size=5&margin=1&format=png",d=e(".weixin",n)[0];if(d)d.style.display="block";else{var r,o,h;r='<div class="w_center"><div id="w_qr" class="w_qr" width="90" height="90"></div><p class="w_cont">使用微信“扫一扫”分享到朋友圈。</p></div><div id="triangle" class="w_bottom"></div><div id="w_close" class="w_close"></div>',d=document.createElement("div"),d.id="w_xin",d.className="weixin",d.innerHTML=r,n.appendChild(d),h=e(".w_bottom",n)[0],1==m?(d.style.top="-83px",d.style.left="175px",h.className="w_left"):2==m?(d.style.top="-83px",d.style.left="120px",h.className="w_left"):3==m?d.style.left="-12px":5==m&&(d.style.top="-83px",d.style.left="-283px",h.className="w_right",d.style.zIndex=3);for(var p=d.parentNode.getElementsByTagName("a"),v=0;v<p.length;v++)p[v].onclick=a;o=e(".w_close",n)[0],o.onclick=function(){d.style.display="none"},e(".w_qr",n)[0].innerHTML='<img src="'+i+'" width="90" height="90">'}}else if("idxy"===this.name){var g=(_.share_txt?_.share_txt:document.title)+" "+t;c(g)}else{var u=_.share_txt?_.share_txt:document.title+(_.addTo?_.addTo:""),b="";b="douban"===this.name?l[this.name]+"name="+encodeURIComponent(u)+"&href="+encodeURIComponent(t)+"&text=%20":"renren"===this.name?l[this.name]+"title="+encodeURIComponent(u)+"&resourceUrl="+encodeURIComponent(t)+"&srcUrl="+encodeURIComponent(t)+"&summary=%20":"qzone"===this.name?l[this.name]+"url="+encodeURIComponent(t)+"&title="+encodeURIComponent(u)+"&summary=%20":l[this.name]+"title="+encodeURIComponent(u)+"&url="+encodeURIComponent(t)+"&summary=%20",window.open(b,"_blank","toolbar=0,status=0,resizable=1,width=750,height=430,left="+(screen.width-750)/2+",top="+(screen.height-430)/2)}"function"==typeof y[this.name]&&y[this.name]()}j[b].onclick=a},b=0;b<j.length;b++)k()},this.share=function(e){}}"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a:window.dxy_share=a}(jQuery);
//# sourceMappingURL=dxy-share.min.js.map
